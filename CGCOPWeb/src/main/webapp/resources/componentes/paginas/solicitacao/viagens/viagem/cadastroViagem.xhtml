<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:panels="http://xmlns.jcp.org/jsf/composite/componentes/panels"
                xmlns:inputs="http://xmlns.jcp.org/jsf/composite/componentes/inputs"
                xmlns:btn="http://xmlns.jcp.org/jsf/composite/componentes/botoes"
                xmlns:componentes="http://xmlns.jcp.org/jsf/composite/componentes">

    <composite:interface id="interCon">

    </composite:interface>
    <composite:implementation  >
        <h:panelGroup layout="block" class="Container100 Responsive">

            <p:fieldset legend="#{label.selecionar} #{label.viagem}" >
                <inputs:input_label_btn_click id="inputVia" inp_valor="#{viagemMB.viagem.id}" lab_valor="#{label.viagem}" 
                                              btn_onclick="PF('dialogViagem').show()" btn_immediate="true" btn_update=":frm_cad:pnlPadrao:compCadastro:tabV" inp_require="true"  
                                              btn_titulo="#{label.viagem}" inp_readonly="true" inp_class_tamanho="80"/>
            </p:fieldset>
            <p:tabView class="Container100 Responsive" id="tabV">
                <p:tab title="#{label.passageiro}" ariaLabel="#{label.passageiro}" id="tabPas">
                    <p:dataTable value="#{viagemMB.passageiros}"  id="tabelaPas" paginatorAlwaysVisible="false"  paginator="true" var="c" rows="10"
                                 rowStyleClass="#{(empty rowIx or rowIx mod 2 ne 0 ? 'even-row' : 'odd-row')  }"
                                 rowIndexVar="rowIx" emptyMessage="#{mensagens['consulta.vazia']}"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,15"  reflow="true">

                        <p:column headerText="#{label.nome}">
                            <componentes:outputText value="#{c.nome}"/>
                        </p:column>
                        <p:column headerText="#{label.acao}" width="10%" class="TexAlCenter">
                            <p:commandButton icon="fa fa-plus-circle" class="btnSalvar" title="#{label.adicionar} #{label.colaborador}" actionListener="#{viagemMB.addPassageiro(c)}" update="tabelaPas" rendered="#{not viagemMB.renderBtnAdd(c)}"/>
                            <p:commandButton icon="fa fa-minus-circle" class="btnExcluir" title="#{label.remover} #{label.colaborador}" actionListener="#{viagemMB.delPassageiro(c)}" update="tabelaPas" rendered="#{viagemMB.renderBtnAdd(c)}"/>
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <!--Fim Tab passageiros-->
                <p:tab title="#{label.passagem}" ariaLabel="#{label.passagem}" id="tabPass">
                    <panels:panel  titulo="#{label.dados} #{label.da} #{label.passagem}" id="pnlPass">
                        <h:panelGroup layout="block" class="Container100 Responsive">
                            <inputs:input_label_data id="input_dto"  inp_class_tamanho="20" inp_valor="#{viagemMB.passagem.dataPartida}" lab_valor="#{label.data} #{label.da} #{label.passagem}"/>
                        </h:panelGroup>
                        <p:fieldset legend="#{label.origem}" >
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.passagem.origem.unidadeFederativa}" id="sel_ufo" lab_valor="#{label.estado}"  ajax_render="true" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20" sel_update=":frm_cad:pnlPadrao:compCadastro:tabV:pnlPass:sel_muno:input" 
                                                    ajax_listener="#{viagemMB.consultarMuncipioPorUf()}" >
                                <f:selectItem value="#{null}" itemLabel="-----Selecione-----" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItems value="#{viagemMB.listaDeUnidadeFederativas}" var="ufo" itemLabel="#{ufo.sigla.toUpperCase()}" itemValue="#{ufo}"/>
                            </inputs:selectOneLabel>
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.passagem.origem.municipio}" id="sel_muno" lab_valor="#{label.municipio}" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20"  >
                                <f:selectItems value="#{viagemMB.listaDeMunicpios}" var="muo" itemLabel="#{muo.nome}" itemValue="#{muo}"/>
                            </inputs:selectOneLabel>
                        </p:fieldset>
                        <p:fieldset legend="#{label.destino}" >
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.passagem.destino.unidadeFederativa}" id="sel_ufd" lab_valor="#{label.estado}"  ajax_render="true" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20" sel_update=":frm_cad:pnlPadrao:compCadastro:tabV:pnlPass:sel_mund:input" 
                                                    ajax_listener="#{viagemMB.consultarMuncipioPorUf()}" >
                                <f:selectItem value="#{null}" itemLabel="-----Selecione-----" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItems value="#{viagemMB.listaDeUnidadeFederativas}" var="ufd" itemLabel="#{ufd.sigla.toUpperCase()}" itemValue="#{ufd}"/>
                            </inputs:selectOneLabel>
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.passagem.destino.municipio}" id="sel_mund" lab_valor="#{label.municipio}" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20"  >
                                <f:selectItems value="#{viagemMB.listaDeMunicpios}" var="mud" itemLabel="#{mud.nome}" itemValue="#{mud}"/>
                            </inputs:selectOneLabel>
                        </p:fieldset>
                    </panels:panel>
                </p:tab>
                <p:tab title="#{label.hospedagem}" ariaLabel="#{label.hospedagem}" id="tabHosp">
                    <panels:panel  titulo="#{label.dados} #{label.da} #{label.hospedagem}" id="pnlHosp">
                        <h:panelGroup layout="block" class="Container100 Responsive">
                            <inputs:input_label_data id="input_dte"  inp_class_tamanho="20" inp_valor="#{viagemMB.hospedagem.dataEntrada}" lab_valor="#{label.data_entrada}"/>
                            <inputs:input_label_data id="input_dts"  inp_class_tamanho="20" inp_valor="#{viagemMB.hospedagem.dataSaida}" lab_valor="#{label.data_saida}"/>
                            <inputs:input_label inp_valor="#{viagemMB.hospedagem.localDoEvento}" lab_valor="#{label.localidade_evento}" inp_require="true" inp_class_tamanho="50" />
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.hospedagem.cidade.unidadeFederativa}" id="sel_ufh" lab_valor="#{label.estado}"  ajax_render="true" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20" sel_update=":frm_cad:pnlPadrao:compCadastro:tabV:pnlHosp:sel_munh:input" 
                                                    ajax_listener="#{viagemMB.consultarMuncipioPorUf()}" >
                                <f:selectItem value="#{null}" itemLabel="-----Selecione-----" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItems value="#{viagemMB.listaDeUnidadeFederativas}" var="ufh" itemLabel="#{ufh.sigla.toUpperCase()}" itemValue="#{ufh}"/>
                            </inputs:selectOneLabel>
                            <inputs:selectOneLabel  inp_valor="#{viagemMB.hospedagem.cidade.municipio}" id="sel_munh" lab_valor="#{label.municipio}" 
                                                    sel_converter="indexConverter" inp_class_tamanho="20"  >
                                <f:selectItems value="#{viagemMB.listaDeMunicpios}" var="muh" itemLabel="#{muh.nome}" itemValue="#{muh}"/>
                            </inputs:selectOneLabel>
                        </h:panelGroup>
                    </panels:panel>
                </p:tab>
            </p:tabView>
        </h:panelGroup>

    </composite:implementation>
</ui:composition>




