<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:panels="http://xmlns.jcp.org/jsf/composite/componentes/panels"
                xmlns:inputs="http://xmlns.jcp.org/jsf/composite/componentes/inputs"
                xmlns:btn="http://xmlns.jcp.org/jsf/composite/componentes/botoes"
                xmlns:componentes="http://xmlns.jcp.org/jsf/composite/componentes">

    <composite:interface id="interCon">

    </composite:interface>
    <composite:implementation  >
        <panels:panel titulo="#{label.dados} #{label.da} #{label.viagem}" id="pnlDadPes" class="fieldDad">
            <h:panelGroup layout="block"  class="Container100 Responsive" >
                <inputs:input_label_data id="input_dtl"  inp_class_tamanho="20" inp_valor="#{viagemMB.viagem.dataDaSolicitacao}" lab_valor="#{label.data} #{label.da} #{label.solicitacao}"/>
                <inputs:input_label inp_valor="#{viagemMB.viagem.referencia}" lab_valor="#{label.referencia_viagem}" inp_require="true" inp_class_tamanho="50" />
            </h:panelGroup>

            <h:panelGroup layout="block"  class="Container100 Responsive" >
                <inputs:selectOneLabel  inp_valor="#{viagemMB.viagem.empresa}" id="sel_em" lab_valor="#{label.empresa}"  ajax_render="true"
                                        sel_converter="indexConverter" inp_class_tamanho="30">
                    <f:selectItem noSelectionOption="true" itemLabel="-----Selecione-----" value="#{null}" itemValue="#{null}" />
                    <f:selectItems value="#{viagemMB.listaEmpresa}" var="em" itemLabel="#{em.nome}" itemValue="#{em}"/>
                </inputs:selectOneLabel>

                <inputs:input_label_btn_click inp_valor="#{viagemMB.viagem.centroDeCusto.id}" id="inp_custo" lab_valor="#{label.centro_custo}" inp_readonly="true" inp_require="true" 
                                              btn_immediate="true" btn_onclick="PF('dialogCosCtc').show()" btn_process="@this" inp_class_tamanho="30" />
            </h:panelGroup>

        </panels:panel>
        <p:dataTable value="#{viagemMB.viagem.colaboradores}" id="tabela" paginatorAlwaysVisible="false"  paginator="true" var="v" rows="10"
                     rowStyleClass="#{(empty rowIx or rowIx mod 2 ne 0 ? 'even-row' : 'odd-row') }"
                     rowIndexVar="rowIx" emptyMessage="#{mensagens['consulta.vazia']}"
                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     rowsPerPageTemplate="5,10,15"  reflow="true">

            <p:column width="5%">
                <p:rowToggler  />
            </p:column>
            <p:column headerText="#{label.id}" width="10%">
                <componentes:outputText value="#{v.id}"/>
            </p:column>
            <p:column headerText="#{label.referencia_viagem}">
                <componentes:outputText value="#{v.referencia}"/>
            </p:column>
            <p:rowExpansion>
                <p:panelGrid  columns="2" columnClasses="label,value" style="width:100%">
                    <componentes:outputText value="#{label.data}" />
                    <componentes:outputText tipo="d" value="#{v.dataDaSolicitacao}" />
                    <componentes:outputText value="#{label.centro_custo}" />
                    <componentes:outputText tipo="d" value="#{v.centroDeCusto.id}" />
                    <componentes:outputText value="#{label.empresa}" />
                    <componentes:outputText tipo="d" value="#{v.empresa.nome}" />
                </p:panelGrid>
            </p:rowExpansion>
            <p:column headerText="#{label.acao}" width="10%">
                <composite:insertChildren/>
                <btn:commandButton_editar rendered="#{cc.attrs.render_edit}" acao_butao="#{viagemMB.escreverRegistroNasessaoNavegarParaEditar(v,solicitacao.viagem_cadastro,'viagem')}" componente_to_update="@(form)" renderizar_btn="true" />
            </p:column>
        </p:dataTable>

    </composite:implementation>
</ui:composition>




