<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:panels="http://xmlns.jcp.org/jsf/composite/componentes/panels"
                xmlns:inputs="http://xmlns.jcp.org/jsf/composite/componentes/inputs"
                xmlns:btn="http://xmlns.jcp.org/jsf/composite/componentes/botoes"
                xmlns:componentes="http://xmlns.jcp.org/jsf/composite/componentes">

    <composite:interface id="interCon">

    </composite:interface>
    <composite:implementation  >
        <panels:panel titulo="#{label.viagem}" id="pnlDadPes" class="fieldDad">

            <p:fieldset legend="#{label.selecionar} #{label.viagem}" >
                <inputs:input_label_btn_click id="inputVia" inp_valor="#{viagemMB.viagem.id}" lab_valor="#{label.viagem}" 
                                              btn_onclick="PF('dialogViagem').show()" btn_immediate="true" btn_update=":frm_cad:pnlPadrao:compCadastro:tabV" inp_require="true"  
                                              btn_titulo="#{label.viagem}" inp_readonly="true" inp_class_tamanho="80"/>
            </p:fieldset>
            <p:tabView class="Container100 Responsive" id="tabV">
                <p:tab title="#{label.passageiro}" ariaLabel="#{label.passageiro}" id="tabPas">
                    <p:dataTable value="#{viagemMB.passageiros}"  id="tabelaPas" paginatorAlwaysVisible="false"  paginator="true" var="c" rows="10"
                                 rowStyleClass="#{(empty rowIx or rowIx mod 2 ne 0 ? 'even-row' : 'odd-row')  }"
                                 rowIndexVar="rowIx" emptyMessage="#{mensagens['consulta.vazia']}"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,15"  reflow="true">

                        <p:column headerText="#{label.nome}">
                            <componentes:outputText value="#{c.nome}"/>
                        </p:column>
                        <p:column headerText="#{label.acao}" width="10%" class="TexAlCenter">
                            <p:commandButton icon="fa fa-plus-circle" class="btnSalvar" title="#{label.adicionar} #{label.colaborador}" actionListener="#{viagemMB.addPassageiro(c)}" update="tabelaPas" rendered="#{not viagemMB.renderBtnAdd(c)}"/>
                            <p:commandButton icon="fa fa-minus-circle" class="btnExcluir" title="#{label.remover} #{label.colaborador}" actionListener="#{viagemMB.delPassageiro(c)}" update="tabelaPas" rendered="#{viagemMB.renderBtnAdd(c)}"/>
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <!--Fim Tab passageiros-->
                <p:tab title="#{label.permissao_usuario}" ariaLabel="#{label.permissao_usuario}" id="tabPass">
                    <h:panelGroup layout="block" class="Container100 Responsive" id="grdEnd">
                        <inputs:selectOneLabel  inp_valor="#{empresaMB.uf}" id="sel_uf" lab_valor="#{label.estado}"  ajax_render="true" 
                                                sel_converter="indexConverter" inp_class_tamanho="20" sel_update=":frm_cad:pnlPadrao:compCadastro:pnlEndereco:sel_mun:input" 
                                                ajax_listener="#{empresaMB.consultarMuncipioPorUf()}" >
                            <f:selectItem value="#{null}" itemLabel="-----Selecione-----" itemValue="#{null}" noSelectionOption="true"/>
                            <f:selectItems value="#{empresaMB.listaDeUnidadeFederativas}" var="uf" itemLabel="#{uf.sigla.toUpperCase()}" itemValue="#{uf}"/>
                        </inputs:selectOneLabel>
                        <inputs:selectOneLabel  inp_valor="#{empresaMB.empresa.endereco.municipio}" id="sel_mun" lab_valor="#{label.municipio}" 
                                                sel_converter="indexConverter" inp_class_tamanho="20"  >
                            <f:selectItems value="#{empresaMB.listaDeMunicipios}" var="mu" itemLabel="#{mu.nome}" itemValue="#{mu}"/>
                        </inputs:selectOneLabel>
                        <p:commandLink value="Submit" update="display" />
                    </h:panelGroup>
                    <p:fieldset legend="#{label.permissoes} #{label.concedida}">

                        <p:dataTable value="#{viagemMB.passageiros}"  id="tabelaPas" paginatorAlwaysVisible="false"  paginator="true" var="c" rows="10"
                                     rowStyleClass="#{(empty rowIx or rowIx mod 2 ne 0 ? 'even-row' : 'odd-row')  }"
                                     rowIndexVar="rowIx" emptyMessage="#{mensagens['consulta.vazia']}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"  reflow="true">

                            <p:column headerText="#{label.nome}">
                                <componentes:outputText value="#{c.nome}"/>
                            </p:column>
                            <p:column headerText="#{label.acao}" width="10%" class="TexAlCenter">
                                <p:commandButton icon="fa fa-plus-circle" class="btnSalvar" title="#{label.adicionar} #{label.colaborador}" actionListener="#{viagemMB.addPassageiro(c)}" update="tabelaPas" rendered="#{not viagemMB.renderBtnAdd(c)}"/>
                                <p:commandButton icon="fa fa-minus-circle" class="btnExcluir" title="#{label.remover} #{label.colaborador}" actionListener="#{viagemMB.delPassageiro(c)}" update="tabelaPas" rendered="#{viagemMB.renderBtnAdd(c)}"/>
                            </p:column>
                        </p:dataTable>
                    </p:fieldset>
                </p:tab>
            </p:tabView>

        </panels:panel>

    </composite:implementation>
</ui:composition>




